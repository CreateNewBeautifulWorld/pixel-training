# å¯é…ç½®ç¥ç»ç½‘ç»œ - ä½¿ç”¨æŒ‡å—

## ğŸ¯ æ–°åŠŸèƒ½

âœ… **å¯é…ç½®æ·±åº¦** - 1å±‚åˆ°10å±‚ä»»æ„é€‰æ‹©  
âœ… **å¯é…ç½®å®½åº¦** - æ¯å±‚ç¥ç»å…ƒæ•°è‡ªç”±è®¾ç½®  
âœ… **å¯é…ç½®è¾“å…¥** - 4åƒç´ ã€8åƒç´ ã€16åƒç´ ç­‰  
âœ… **è®­ç»ƒå¯è§†åŒ–** - è‡ªåŠ¨ç”ŸæˆLosså’ŒAccuracyæ›²çº¿å›¾  
âœ… **å‘½ä»¤è¡Œå‚æ•°** - æ— éœ€ä¿®æ”¹ä»£ç   

## ğŸ“Š é…ç½®ç¤ºä¾‹

### ç¤ºä¾‹1: æµ…å±‚çª„ç½‘ç»œï¼ˆçœèµ„æºï¼‰
```bash
# 4ä¸ªåƒç´ , 1å±‚éšè—å±‚(8ç¥ç»å…ƒ), 3åˆ†ç±»
python train_configurable.py \
    --num_pixels 4 \
    --hidden_layers 8 \
    --num_classes 3 \
    --epochs 100
```

**ç½‘ç»œç»“æ„**: `12 -> 8 -> 3`  
**æ·±åº¦**: 2å±‚  
**å‚æ•°é‡**: 96 + 8 + 24 + 3 = 131 bytes  
**é€‚åˆ**: æä½èµ„æºè®¾å¤‡ï¼Œå¿«é€Ÿæ¨ç†

---

### ç¤ºä¾‹2: æ ‡å‡†ç½‘ç»œï¼ˆé»˜è®¤ï¼‰
```bash
# 16ä¸ªåƒç´ , 1å±‚éšè—å±‚(16ç¥ç»å…ƒ), 3åˆ†ç±»
python train_configurable.py \
    --num_pixels 16 \
    --hidden_layers 16 \
    --num_classes 3 \
    --epochs 100
```

**ç½‘ç»œç»“æ„**: `48 -> 16 -> 3`  
**æ·±åº¦**: 2å±‚  
**å‚æ•°é‡**: 768 + 16 + 48 + 3 = 835 bytes  
**é€‚åˆ**: ä¸€èˆ¬åº”ç”¨ï¼Œå¹³è¡¡æ€§èƒ½å’Œèµ„æº

---

### ç¤ºä¾‹3: æ·±å±‚ç½‘ç»œï¼ˆæ›´å¥½ç²¾åº¦ï¼‰
```bash
# 16ä¸ªåƒç´ , 3å±‚éšè—å±‚(32,16,8), 3åˆ†ç±»
python train_configurable.py \
    --num_pixels 16 \
    --hidden_layers 32 16 8 \
    --num_classes 3 \
    --epochs 150
```

**ç½‘ç»œç»“æ„**: `48 -> 32 -> 16 -> 8 -> 3`  
**æ·±åº¦**: 4å±‚  
**å‚æ•°é‡**: çº¦2KB  
**é€‚åˆ**: å¤æ‚ä»»åŠ¡ï¼Œéœ€è¦æ›´é«˜ç²¾åº¦

---

### ç¤ºä¾‹4: å®½å±‚ç½‘ç»œï¼ˆé«˜å®¹é‡ï¼‰
```bash
# 16ä¸ªåƒç´ , 2å±‚éšè—å±‚(64,32), 5åˆ†ç±»
python train_configurable.py \
    --num_pixels 16 \
    --hidden_layers 64 32 \
    --num_classes 5 \
    --epochs 200 \
    --learning_rate 0.005
```

**ç½‘ç»œç»“æ„**: `48 -> 64 -> 32 -> 5`  
**æ·±åº¦**: 3å±‚  
**å‚æ•°é‡**: çº¦4KB  
**é€‚åˆ**: å¤šåˆ†ç±»ä»»åŠ¡

---

### ç¤ºä¾‹5: å¤§è¾“å…¥ç½‘ç»œ
```bash
# 32ä¸ªåƒç´ , 2å±‚éšè—å±‚(128,64), 10åˆ†ç±»
python train_configurable.py \
    --num_pixels 32 \
    --hidden_layers 128 64 \
    --num_classes 10 \
    --epochs 300 \
    --num_samples 5000
```

**ç½‘ç»œç»“æ„**: `96 -> 128 -> 64 -> 10`  
**æ·±åº¦**: 3å±‚  
**å‚æ•°é‡**: çº¦20KB  
**é€‚åˆ**: é«˜åˆ†è¾¨ç‡è¾“å…¥ï¼Œå¤æ‚åˆ†ç±»

---

## ğŸ”§ å®Œæ•´å‚æ•°åˆ—è¡¨

```bash
python train_configurable.py [OPTIONS]

ç½‘ç»œç»“æ„å‚æ•°:
  --num_pixels INT           è¾“å…¥åƒç´ æ•° (é»˜è®¤: 16)
  --hidden_layers INT [INT]  éšè—å±‚ç¥ç»å…ƒæ•° (é»˜è®¤: [16])
                             å¯ä»¥æŒ‡å®šå¤šå±‚ï¼Œä¾‹å¦‚: --hidden_layers 32 16 8
  --num_classes INT          åˆ†ç±»æ•° (é»˜è®¤: 3)

è®­ç»ƒå‚æ•°:
  --num_samples INT          ç”Ÿæˆçš„è®­ç»ƒæ ·æœ¬æ•° (é»˜è®¤: 1000)
  --epochs INT               è®­ç»ƒè½®æ•° (é»˜è®¤: 100)
  --batch_size INT           æ‰¹å¤§å° (é»˜è®¤: 32)
  --learning_rate FLOAT      å­¦ä¹ ç‡ (é»˜è®¤: 0.01)

è¾“å‡ºæ–‡ä»¶:
  --data_file STR            è®­ç»ƒæ•°æ®æ–‡ä»¶ (é»˜è®¤: train_data.txt)
  --weight_file STR          æƒé‡è¾“å‡ºæ–‡ä»¶ (é»˜è®¤: weights_uint8.bin)
  --plot_file STR            è®­ç»ƒæ›²çº¿å›¾æ–‡ä»¶ (é»˜è®¤: training_history.png)
```

---

## ğŸ“ˆ è®­ç»ƒæ›²çº¿å›¾è¯´æ˜

è¿è¡Œåä¼šç”Ÿæˆ `training_history.png`ï¼ŒåŒ…å«ä¸¤ä¸ªå›¾ï¼š

### å·¦å›¾: Lossæ›²çº¿
- **Yè½´**: äº¤å‰ç†µæŸå¤±
- **Xè½´**: è®­ç»ƒè½®æ•°
- **æœŸæœ›**: å¹³æ»‘ä¸‹é™åˆ°æ¥è¿‘0

### å³å›¾: Accuracyæ›²çº¿
- **Yè½´**: å‡†ç¡®ç‡ (%)
- **Xè½´**: è®­ç»ƒè½®æ•°
- **æœŸæœ›**: å¹³æ»‘ä¸Šå‡åˆ°æ¥è¿‘100%

**è‰¯å¥½è®­ç»ƒçš„ç‰¹å¾**:
- âœ… Lossç¨³å®šä¸‹é™
- âœ… Accuracyç¨³å®šä¸Šå‡
- âœ… æ›²çº¿å¹³æ»‘ï¼ˆæ— å‰§çƒˆéœ‡è¡ï¼‰
- âœ… æœ€ç»ˆæ”¶æ•›

**é—®é¢˜è®­ç»ƒçš„ç‰¹å¾**:
- âš ï¸ Losséœ‡è¡æˆ–ä¸ä¸‹é™ â†’ é™ä½å­¦ä¹ ç‡
- âš ï¸ Accuracyä¸ä¸Šå‡ â†’ å¢åŠ è®­ç»ƒè½®æ•°æˆ–éšè—å±‚
- âš ï¸ Lossä¸‹é™ä½†Accuracyä½ â†’ ç½‘ç»œå®¹é‡ä¸è¶³ï¼Œå¢åŠ ç¥ç»å…ƒ

---

## ğŸ¨ ç½‘ç»œè®¾è®¡å»ºè®®

### æ·±åº¦é€‰æ‹©

| ä»»åŠ¡å¤æ‚åº¦ | æ¨èæ·±åº¦ | ç¤ºä¾‹ |
|-----------|---------|------|
| ç®€å•åˆ†ç±» | 1-2å±‚ | `--hidden_layers 16` |
| ä¸­ç­‰å¤æ‚ | 2-3å±‚ | `--hidden_layers 32 16` |
| å¤æ‚ä»»åŠ¡ | 3-5å±‚ | `--hidden_layers 64 32 16 8` |

**è§„åˆ™**:
- æµ…å±‚ç½‘ç»œè®­ç»ƒå¿«ï¼Œä½†è¡¨è¾¾èƒ½åŠ›æœ‰é™
- æ·±å±‚ç½‘ç»œè¡¨è¾¾èƒ½åŠ›å¼ºï¼Œä½†å®¹æ˜“è¿‡æ‹Ÿåˆ
- ç¡¬ä»¶å®ç°æ—¶ï¼Œæ·±åº¦è¶Šæ·±å»¶è¿Ÿè¶Šå¤§

---

### å®½åº¦é€‰æ‹©

| è¾“å…¥å¤§å° | ç¬¬1å±‚ | ç¬¬2å±‚ | ç¬¬3å±‚ | è¾“å‡ºå±‚ |
|---------|-------|-------|-------|--------|
| 12 (4åƒç´ ) | 8-16 | 4-8 | - | 3 |
| 48 (16åƒç´ ) | 16-32 | 8-16 | - | 3 |
| 96 (32åƒç´ ) | 64-128 | 32-64 | 16-32 | 10 |

**è§„åˆ™**:
- ç¬¬ä¸€å±‚é€šå¸¸ä¸ºè¾“å…¥ç»´åº¦çš„ 1/2 åˆ° 1å€
- é€å±‚é€’å‡ï¼ˆä¾‹å¦‚ï¼š64 -> 32 -> 16ï¼‰
- æœ€åä¸€å±‚ç­‰äºåˆ†ç±»æ•°

---

### å‚æ•°é‡ä¼°ç®—

```
å‚æ•°é‡ = Î£ (L[i] Ã— L[i+1] + L[i+1])

ä¾‹å¦‚: 48 -> 32 -> 16 -> 3
= (48Ã—32 + 32) + (32Ã—16 + 16) + (16Ã—3 + 3)
= 1568 + 528 + 51
= 2147 bytes
```

**ç¡¬ä»¶çº¦æŸ**:
- < 1KB: å¾®æ§åˆ¶å™¨
- 1-10KB: ä½ç«¯FPGA
- 10-100KB: ä¸­ç«¯FPGA
- > 100KB: é«˜ç«¯FPGA/ASIC

---

## ğŸ” å®é™…æ¡ˆä¾‹

### æ¡ˆä¾‹1: è¾¹ç¼˜è®¾å¤‡æ‰‹åŠ¿è¯†åˆ«
```bash
# 8ä¸ªä¼ æ„Ÿå™¨ç‚¹, æ¯ä¸ª3Dåæ ‡ = 24è¾“å…¥
python train_configurable.py \
    --num_pixels 8 \
    --hidden_layers 16 8 \
    --num_classes 5 \
    --epochs 200 \
    --num_samples 2000
```
**ä»»åŠ¡**: è¯†åˆ«5ç§æ‰‹åŠ¿  
**ç½‘ç»œ**: `24 -> 16 -> 8 -> 5`  
**å‚æ•°**: çº¦540 bytes

---

### æ¡ˆä¾‹2: å°å›¾åƒåˆ†ç±»
```bash
# 4Ã—4ç°åº¦å›¾åƒ = 16è¾“å…¥
python train_configurable.py \
    --num_pixels 16 \
    --hidden_layers 32 16 \
    --num_classes 10 \
    --epochs 300 \
    --num_samples 5000 \
    --learning_rate 0.005
```
**ä»»åŠ¡**: MNISTé£æ ¼æ•°å­—è¯†åˆ«  
**ç½‘ç»œ**: `48 -> 32 -> 16 -> 10`  
**å‚æ•°**: çº¦2KB

---

### æ¡ˆä¾‹3: ä¼ æ„Ÿå™¨èåˆ
```bash
# 16é€šé“ä¼ æ„Ÿå™¨æ•°æ®
python train_configurable.py \
    --num_pixels 16 \
    --hidden_layers 24 12 \
    --num_classes 3 \
    --epochs 150 \
    --num_samples 3000
```
**ä»»åŠ¡**: å¼‚å¸¸æ£€æµ‹ï¼ˆæ­£å¸¸/è­¦å‘Š/å±é™©ï¼‰  
**ç½‘ç»œ**: `48 -> 24 -> 12 -> 3`  
**å‚æ•°**: çº¦1.4KB

---

## ğŸ“Š å¯¹æ¯”ä¸åŒé…ç½®

è¿è¡Œå¤šä¸ªé…ç½®å¹¶æ¯”è¾ƒï¼š

```bash
# é…ç½®1: æµ…çª„
python train_configurable.py --hidden_layers 8 --plot_file plot_shallow.png

# é…ç½®2: æ ‡å‡†
python train_configurable.py --hidden_layers 16 --plot_file plot_standard.png

# é…ç½®3: æ·±çª„
python train_configurable.py --hidden_layers 16 8 4 --plot_file plot_deep.png

# é…ç½®4: æµ…å®½
python train_configurable.py --hidden_layers 32 --plot_file plot_wide.png
```

ç„¶åå¯¹æ¯”4å¼ è®­ç»ƒæ›²çº¿å›¾ï¼Œé€‰æ‹©æœ€ä¼˜é…ç½®ã€‚

---

## ğŸ’¡ ä¼˜åŒ–å»ºè®®

### æé«˜å‡†ç¡®ç‡
1. **å¢åŠ ç½‘ç»œå®¹é‡**: `--hidden_layers 32 16`
2. **å¢åŠ è®­ç»ƒè½®æ•°**: `--epochs 200`
3. **é™ä½å­¦ä¹ ç‡**: `--learning_rate 0.005`
4. **å¢åŠ è®­ç»ƒæ ·æœ¬**: `--num_samples 5000`

### å‡å°‘èµ„æºå ç”¨
1. **å‡å°‘ç¥ç»å…ƒ**: `--hidden_layers 8`
2. **å‡å°‘å±‚æ•°**: åªç”¨1-2å±‚
3. **å‡å°‘è¾“å…¥åƒç´ **: `--num_pixels 4`

### åŠ å¿«è®­ç»ƒ
1. **å‡å°‘è½®æ•°**: `--epochs 50`
2. **å¢å¤§æ‰¹å¤§å°**: `--batch_size 64`
3. **æé«˜å­¦ä¹ ç‡**: `--learning_rate 0.02`

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æœ€ç®€å•çš„ä¾‹å­
```bash
# ä½¿ç”¨é»˜è®¤é…ç½®
python train_configurable.py
```

### æŸ¥çœ‹å¸®åŠ©
```bash
python train_configurable.py --help
```

### è‡ªå®šä¹‰é…ç½®
```bash
# ä½ çš„ä»»åŠ¡: 8ä¸ªåƒç´ ï¼Œ2å±‚éšè—å±‚(20,10)ï¼Œ4åˆ†ç±»
python train_configurable.py \
    --num_pixels 8 \
    --hidden_layers 20 10 \
    --num_classes 4 \
    --epochs 150
```

---

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **éšè—å±‚å‚æ•°**: ç”¨ç©ºæ ¼åˆ†éš”ï¼Œä¾‹å¦‚ `--hidden_layers 32 16 8`
2. **è®­ç»ƒæ ·æœ¬æ•°**: è‡³å°‘æ˜¯æ‰¹å¤§å°çš„10å€
3. **å­¦ä¹ ç‡**: å¤ªå¤§ä¼šä¸æ”¶æ•›ï¼Œå¤ªå°ä¼šè®­ç»ƒæ…¢
4. **å¯è§†åŒ–**: éœ€è¦matplotlibåº“: `pip install matplotlib`

---

## ğŸ“ è¾“å‡ºæ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|-----|------|
| train_data.txt | è®­ç»ƒæ•°æ®ï¼ˆCSVæ ¼å¼ï¼‰|
| weights_uint8.bin | é‡åŒ–æƒé‡ï¼ˆäºŒè¿›åˆ¶ï¼‰|
| weights_uint8.bin.txt | é‡åŒ–æƒé‡ï¼ˆæ–‡æœ¬ï¼‰|
| training_history.png | è®­ç»ƒæ›²çº¿å›¾ |

---

äº«å—è‡ªå®šä¹‰ä½ çš„ç¥ç»ç½‘ç»œå§ï¼ğŸ‰
